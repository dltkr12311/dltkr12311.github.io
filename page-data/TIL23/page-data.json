{"componentChunkName":"component---src-templates-post-template-tsx","path":"/TIL23/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<blockquote>\n<p><strong>자바스크립트에서는 원시값과 참조값으로 나뉜다.</strong></p>\n</blockquote>\n<ul>\n<li>원시값에는 <code class=\"language-text\">Number, String, Boolean, Null, Undefiend</code> 타입이 있고 값을 복사할 때 다른 메모리에 복사가 되기때문에 영향을 받지 않는다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token string\">'lee'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> a<span class=\"token punctuation\">;</span>\nb <span class=\"token operator\">=</span> <span class=\"token string\">'park'</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// park</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// lee</span></code></pre></div>\n<ul>\n<li>참조값은 <code class=\"language-text\">Object, Symbol</code> 타입이 있고 참조값은 변수가 같은 객체의 주소를 가르키기 때문에 영향을 미친다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'lee'</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token number\">99</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> a<span class=\"token punctuation\">;</span>\n\nb<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'park'</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// park</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// park</span></code></pre></div>\n<blockquote>\n<p><strong>이러한 객체의 특징 때문에 객체는 불변성을 지키기 위해 얕은 복사 또는 깊은 복사를 하게 된다.</strong></p>\n</blockquote>\n<h3>얕은복사(Shllow Copy)</h3>\n<p><strong>Object.assign()</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'lee'</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    age<span class=\"token operator\">:</span> <span class=\"token number\">99</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> newA <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nnewA<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'park'</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>newA<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// park</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// lee</span></code></pre></div>\n<p>이렇게 <code class=\"language-text\">Object.assign()</code> 메소드를 사용하면 값이 변하지 않는것을 확인할수 있다.</p>\n<p><strong>Spread Operator</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'lee'</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    age<span class=\"token operator\">:</span> <span class=\"token number\">99</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> newA <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>a <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nnewA<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'park'</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>newA<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// park</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// lee</span></code></pre></div>\n<p>두번째로는 <code class=\"language-text\">Spread Operator</code> 를 사용하면 값이 변하지 않는다.</p>\n<p><code class=\"language-text\">Object.assign() 와</code> <code class=\"language-text\">Spread Operator</code>를 사용하면 1차원 객체는 복사가 되지만 2차원 객체는 복사가 되지 않는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">newA<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>newA<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 100</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 100</span></code></pre></div>\n<h3>깊은 복사(Deep Copy)</h3>\n<p><strong>JSON Method</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'lee'</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    age<span class=\"token operator\">:</span> <span class=\"token number\">99</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> stringA <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> newA <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>stringA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nnewA<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>newA<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 100;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 99</span></code></pre></div>\n<p>JSON 객체를 이용해 깊은 복사를 할 수 있다. <code class=\"language-text\">JSON.stringify()</code> 로 객체를 문자열로 변환해준다. 그리고 다시 <code class=\"language-text\">JSON.parse()</code> 을 통해 문자열을 객체로 변환해준다. 이 방법으로 깊은 복사를 할 수 있게된다 하지만\n객체 → 문자열 → 객체로 과정이 필요하기에 성능이 좋지? 않다.</p>\n<p><strong>Recursive Function</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'lee'</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    age<span class=\"token operator\">:</span> <span class=\"token number\">99</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">deepCopy</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepCopy</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      result<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> newA <span class=\"token operator\">=</span> <span class=\"token function\">deepCopy</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nnewA<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a:'</span><span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//99</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'newA:'</span><span class=\"token punctuation\">,</span> newA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//100</span></code></pre></div>\n<p>객체의 키가 객체가 아닐때까지 자신을 호출한다. 이렇게 재귀함수로 깊은 복사를 할 수 있다.</p>","frontmatter":{"title":"Deep Copy & Shllow Copy","summary":"자바스크립트에서는 원시값과 참조값으로 나뉜다.","date":"2021.10.29.","categories":["TIL"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABpklEQVQoz6VSyUoDQRDN/wkzSXemx7jhrnGJIiIumSUaIsHdGJdDgkQRBEHcDkYDggievHgUBQ8uiIgQRcXRJ92JMkkUFA9Fdb2qev2qqx2mSq8CxW6YKn3n3m6mSoU3FBd65CL0ykUwGMnJ2XtNlaYdPxF+NuhuJ8LV5VifGsFaZAiDlaUCs9f8ilAoYwShihKcH+0Dj1fCTg9TCJaqf1fY71HgJxJmOn14vTvH0/UJXm7PxDnia4RGZQQ8X/WFhBzUFVfOzZyUj3ec2gAeLvF8c4qDlYRQznMBjwKTkZ8VDtVVisLPh+cK+UKWQgYW+vsw0lAtlsPVadQp8sEyVYjhQr4Is+O9z+vd2FuKYTsWRSoxh9WJMBYHNEy2NgjC1fEwkrEotmbHsTkzhmR8WniDkUKFHAyWFWOqrQmRNi8iPi/i/i4M11eB45w02t6M6Y4WjHlrMdGSiUcbawpGvsgCrwYjlp9Ilp/IWS9ZuuKyOK5ROYO7JEujzmwsWZrbafFeU6VvpkrvOWE6f7t2+y5nj/P/rkNnZFlnZFdnJPlP29EZWf8ATRD0gS+kIEMAAAAASUVORK5CYII=","aspectRatio":1.7857142857142858,"src":"/static/ace76f7f662b9d0468aa85389a73818f/c019b/TIL6.png","srcSet":"/static/ace76f7f662b9d0468aa85389a73818f/a9f05/TIL6.png 200w,\n/static/ace76f7f662b9d0468aa85389a73818f/23840/TIL6.png 400w,\n/static/ace76f7f662b9d0468aa85389a73818f/c019b/TIL6.png 800w,\n/static/ace76f7f662b9d0468aa85389a73818f/00376/TIL6.png 1200w,\n/static/ace76f7f662b9d0468aa85389a73818f/776f9/TIL6.png 1202w","srcWebp":"/static/ace76f7f662b9d0468aa85389a73818f/210fa/TIL6.webp","srcSetWebp":"/static/ace76f7f662b9d0468aa85389a73818f/8444f/TIL6.webp 200w,\n/static/ace76f7f662b9d0468aa85389a73818f/42fc5/TIL6.webp 400w,\n/static/ace76f7f662b9d0468aa85389a73818f/210fa/TIL6.webp 800w,\n/static/ace76f7f662b9d0468aa85389a73818f/3058d/TIL6.webp 1200w,\n/static/ace76f7f662b9d0468aa85389a73818f/a7289/TIL6.webp 1202w","sizes":"(max-width: 800px) 100vw, 800px"}},"publicURL":"/static/ace76f7f662b9d0468aa85389a73818f/TIL6.png"}}}}]}},"pageContext":{"slug":"/TIL23/"}},"staticQueryHashes":[]}