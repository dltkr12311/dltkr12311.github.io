{"componentChunkName":"component---src-templates-post-template-tsx","path":"/TIL16/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>Execution Context</h1>\n<ul>\n<li>실행 컨텍스트는 JavaScript코드가 실행되는 환경이다.</li>\n<li>함수를 실행 할때 마다 그 함수에 대한 새로운 실행 컨텍스트를 생성하여 자신만의 고유한 컨텍스트를 가진다.</li>\n</ul>\n<h2>Global Code</h2>\n<ul>\n<li>전역영역에 존재하는 코드이다.</li>\n<li>Call Stack에 전역 컨텍스트는 하나뿐이다.</li>\n</ul>\n<h2>Function Code</h2>\n<ul>\n<li>함수 호출할때마다 자신의 실행 컨텍스트를 갖는다.</li>\n</ul>\n<h3><strong>자바스크립트 엔진은 코드를 실행하기 위해 필요한 여러가지 정보를 알고 있어야 한다.</strong></h3>\n<ol>\n<li>Variable Environment</li>\n<li>Lexical Environment</li>\n<li>this Binding</li>\n</ol>\n<h3><strong>Variable Environment</strong></h3>\n<p><strong>(LexicalEnvironment의 스냅샷이라고 함)</strong></p>\n<h3><strong>Lexical Environment</strong></h3>\n<p><strong>Environment Record</strong></p>\n<p><strong>Outer Environment</strong></p>\n<p><em>scope할때 자세히 설명하려함</em></p>\n<h1>Hoisting</h1>\n<p>변수 및 함수 선언이 물리적으로 작성한 코드의 상단으로 옮겨지는 것으로 알고있지만, 사실은 좀 다르다 변수 및 함수 선언은 컴파일 단계에서 메모리에 저장이 되지만 코드에서 입력한 위치와 정확히 일치한 곳에 있다.</p>\n<ul>\n<li>컴파일레이션은 코드가 실행되기 직전에 순식간에 일어난다.</li>\n<li>컴파일레이션 3단계 (자바스크립트는 크게 3단계 통해 해석(컴파일) 된다.\n<ol>\n<li>토큰나이징/ 렉싱 : 코드를 의미있는 조각으로 만드는 과정</li>\n<li>파싱 : 문법 구조를 반영하여 중첩 원소를 가지는 트리형태로 바꾸는 과정 파싱의 결과를 AST(추상 구문 트리)라고 부름.</li>\n<li>코드 생성 : AST를 실행코드로(기계어) 바꾸는 과정</li>\n</ol>\n</li>\n</ul>\n<p>변수는 선언하기 전에 초기화 하여 사용 될 수 있지만 초기화 없이 사용할 수 없다 자바스크립트는 초기화가 아닌 선언만 끌어 올린다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">num <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\nstring <span class=\"token operator\">+</span> <span class=\"token number\">7</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> num<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 12 에러없이 출력이 된다. 변수가 선언이 되면 위로 끌어 올리기 때문에 가능하다</span></code></pre></div>\n<p><strong>호이스팅 우선순위</strong></p>\n<p>변수 선언이 함수 서언보다 위로 올라간다.</p>\n<h1>Scope &#x26; Closure</h1>\n<p><img src=\"https://image.toast.com/aaaadh/alpha/2016/techblog/javascriptoverview.png\" alt=\"https://image.toast.com/aaaadh/alpha/2016/techblog/javascriptoverview.png\"></p>\n<p><strong>클로저에 대한 정의는 없다.</strong> 클로저는 자바스크립트가 채용하고 있는 기술적 기반 혹은 컨셉으로, 자바스크립트는 클로저를 이용하여 스코프적 특징과 일급 객체로서의 함수에 대한 명세를 구현한 것이다.</p>\n<h2>스코프(Scope)</h2>\n<p>프로그래밍에서 변수나 함수의 이름을 부여하여 의미를 갖도록 한다. 만약 이름이 없다면 그저 하나의 메모리 주소에 지나지 않는다. 그래서 프로그램은 “이름:값”의 대응표를 만들어 사용한다. 이 대응표의 이름을 가지고 코드를 보다 쉽게 이해하고, 또 이름을 통해 값을 저장하고, 다시 가져와 수정한다.</p>\n<p>초기 프로그래밍 언어는 이 대응표를 프로그램 전체에서 하나로 관리했는데, 이름 충돌의 문제가 있었다. 그래서 충돌을 피하기 위해, 각 언어마다 스코프 규칙을 만들어 정의하였다.</p>\n<h3><strong>스코프의 규칙</strong></h3>\n<p><strong>함수 레벨 스코프</strong></p>\n<ul>\n<li>자바스크립트에서는 <code class=\"language-text\">var</code>키워드로 선언된 변수나, <code class=\"language-text\">함수 선언식</code>으로 만들어진 <code class=\"language-text\">함수는 함수 레벨</code> 스코프를 갖는다. 즉, 함수 내부 전체에서 유요한 식별자가 된다.</li>\n</ul>\n<p><strong>블록 레벨 스코프</strong></p>\n<ul>\n<li>ES6의 <code class=\"language-text\">let</code> , <code class=\"language-text\">const</code> 키워드는 블록 레벨 스코프 변수를 만들어 준다.</li>\n</ul>\n<p><strong>렉시컬 스코프</strong></p>\n<ul>\n<li>렉시컬 스코프에서는 <strong>소스코드가 작성된 그 문맥에서 결정된다</strong>. 요즘 프로그래밍에서는 대부부분의 언어들은 렉시컬 규칙을 따르고 있다.</li>\n<li>렉시컬 스코프를 규칙을 따르는 자바스크립트의 <strong>함수는 호출 스택과 관계없이 각각의 대응표를 소스코드 기준으로 정의하고, 런타임에 그 대응표를 변경시키지 않는다</strong>.</li>\n</ul>\n<h3>중첩 스코프(스코프 체인 또는 스코프 버블)</h3>\n<p>자바스크립트의 스코프는 ECMAScript 언어 명세에서 렉시컬 환경(<code class=\"language-text\">Lexical enviroment</code>)과 환경레코드(<code class=\"language-text\">Enviroment Record</code>) 라는 개념으로 정의되어있다.</p>\n<p><img src=\"https://image.toast.com/aaaadh/alpha/2016/techblog/executioncontext.png\" alt=\"https://image.toast.com/aaaadh/alpha/2016/techblog/executioncontext.png\"></p>\n<p>“이름:값의 대응표가” 환경 레코드과 같다고 볼 수 있고, 렉시컬 환경은 이 환경레코드와 상위 렉시컬 환경에 대한 참조로 이루어진다.</p>\n<p>현재-렉시컬 환경의 대응표(환경 레코드)에서 변수를 찾아보고, 없다면 바깥(상위) 렉시컬 환경을 참조하여서 찾아보는 식으로 중첩 스코프가 가능해진다. 이 중첩 스코프 탐색은 해당하는 이름을 찾거나 바깥 렉시컬 환경 참조가 <code class=\"language-text\">null</code> 이 될 때 탐색을 멈춘다.</p>\n<hr>\n<h2>클로저(Closure)</h2>\n<ul>\n<li>함수 밖에서 선언된 변수를 함수 내부에 사용할 때 클로저가 생겨난다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">\n클로저 <span class=\"token operator\">=</span> 함수 <span class=\"token operator\">+</span> 함수를 둘러싼 <span class=\"token function\">환경</span><span class=\"token punctuation\">(</span>Lexical environment<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">outer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'lee'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">inner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">return</span> inner<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> innerFunc <span class=\"token operator\">=</span> <span class=\"token function\">outer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">innerFunc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>함수를 둘러싼 환경이라는 것이 바로 렉시컬 스코프이다. 함수를 만들고 그 함수 내부의 코드가 탐색하는 스코프를 함수 생성 당시의 렉시컬 스코프로 고정하면 바로 클로저가 된다.</p>\n<h3>자바스크립트의 클로저</h3>\n<ul>\n<li>자바스크립트에서 클로저는 함수가 생성되는 시점에 생성된다.\n= 함수가 생성될 때 그 함수의 렉시컬 환경을 포섭(closure)하여 실행될 때 이용한다.</li>\n</ul>\n<p>따라서 개념적으로 자바스크립트 모든 함수는 클로저라고 할 수 있지만, <strong>실제로 모든 함수가 클로저라고 부르지는 않는다.</strong></p>\n<p><strong>닳고 닳은 유명한 클로저</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> i<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">timer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> i <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 코드는 1 부터 9까지 0.1초마다 출력해야 하는데 결과로는 10이 9번 출력이 된다.</p>\n<ul>\n<li>\n<p>1~9까지 차례대로 출력할수 있는 두 가징 방법</p>\n<ol>\n<li>새로운 스코프를 추가하여 반복 시마다 각각 따로 값을 저장하는 방식</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> i<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">9</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">countingNumber</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">timer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>countingNumber<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> i <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2. ES6에서 추가된 블록 스코프를 이용하는 방식</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">timer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> i <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>\n<h3>Source</h3>\n<p><a href=\"https://meetup.toast.com/posts/86\" target=\"_blank\" rel=\"nofollow\">자바스크립트의 스코프와 클로저 - TOAST Meetup</a></p>","frontmatter":{"title":"TIL16 | Execution Context, Hoisting, Scope, Closure","summary":"실행 컨텍스트는 JavaScript코드가 실행되는 환경이다.","date":"2021.08.16.","categories":["TIL"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABj0lEQVQoz4VTy04CQRDk4ySAgssCCoiJgLxkQQGFYJCHgotB1PhEDQkH/QTvnvRi4kmjMcpBPSkHwgdsmR4ZAgh46EzvTHd1Vc2symgLYVgIVgmiLQTD1AJ0og+T08HOfm9dSBGslEuKahgQbxo3++GYTyC2WoZ1LoYJs/8P6L+AFKI9zMDC8SLuHz5Q/2zh5u4F7mAaektgNMNuRjxMM4tQG1yoXlzhq6ngud5AowWUDy+hNrjZeVe90u5XVByIVvKImHFAYhJalvH09o3X9yaubx/h9KdYHZ3zWsEqKXxVdfthdixBJ3oxbvJBZ/JBI3hgmY0gtXHEpJJ/Y3oXtEYvtEYPNEYPuzDOsANIQWzW8seQd2uQd2rIl6qIJrfZZdhdK4gkS0jmDpDZrCBXPGNDaM3Kp72SOSBNcgZSrIiaMnIF61vnCEYLsLviSKT3kC6cMIBkdp8F5TSUS+54yCUTKMnslkPMyTN6h2y/fU6yKSd7BkrmoGQ0j/5nNCx6GP4m0sA/oH/YiO82oKT8AA9H5ApmiSGpAAAAAElFTkSuQmCC","aspectRatio":1.7857142857142858,"src":"/static/67f5b307b7781e511046c7fb490c5e0b/c019b/TIL4.png","srcSet":"/static/67f5b307b7781e511046c7fb490c5e0b/a9f05/TIL4.png 200w,\n/static/67f5b307b7781e511046c7fb490c5e0b/23840/TIL4.png 400w,\n/static/67f5b307b7781e511046c7fb490c5e0b/c019b/TIL4.png 800w,\n/static/67f5b307b7781e511046c7fb490c5e0b/2def3/TIL4.png 1194w","srcWebp":"/static/67f5b307b7781e511046c7fb490c5e0b/210fa/TIL4.webp","srcSetWebp":"/static/67f5b307b7781e511046c7fb490c5e0b/8444f/TIL4.webp 200w,\n/static/67f5b307b7781e511046c7fb490c5e0b/42fc5/TIL4.webp 400w,\n/static/67f5b307b7781e511046c7fb490c5e0b/210fa/TIL4.webp 800w,\n/static/67f5b307b7781e511046c7fb490c5e0b/8d403/TIL4.webp 1194w","sizes":"(max-width: 800px) 100vw, 800px"}},"publicURL":"/static/67f5b307b7781e511046c7fb490c5e0b/TIL4.png"}}}}]}},"pageContext":{"slug":"/TIL16/"}},"staticQueryHashes":[]}