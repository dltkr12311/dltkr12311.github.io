{"componentChunkName":"component---src-templates-post-template-tsx","path":"/TIL3/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>Github Pages</h2>\n<p><code class=\"language-text\">gatsby</code> 를 이용해서 블로그를 만들었고 배포 하기 위해 Github Pages를 사용하기로 했다. (Github Pages는 github 에서 제공하는 정적 웹사이트 호스팅 서비스이다) 그럼 Github Pages를 만들고 배포하는 법을 정리해 보았다.\n먼저 Github Pages를 생성하려면 레퍼지토리를 만들어야 하는데 이름은 무조건 <strong>[username].github.io</strong>로 만들어야 한다.\n<img src=\"https://user-images.githubusercontent.com/60437099/127360912-8cf3abc4-9cdb-4612-9b3e-ee1b398e1008.png\" alt=\"1\"></p>\n<p>이렇게 만들고, 자신의 프로젝트로 돌아와 몇가지 과정을 수행해야 한다. Github Pages에서는 master 브랜치에서 파일을 호스팅 하기 때문에 개발용 브랜치를 생성해서 개발을 진행하는것이 났다 그래서 아래와 같이 개발 브랜치로 이동 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">git branch <span class=\"token operator\">-</span>m dev\ngit add <span class=\"token punctuation\">.</span>\ngit commit <span class=\"token operator\">-</span>m <span class=\"token string\">\"블라블라\"</span>\ngit push <span class=\"token operator\">-</span>u origin dev</code></pre></div>\n<p>Github Pages 통해 배포를 진행하는 경우 <code class=\"language-text\">npm install -D gh-pages</code> 를 설치해줘야 한다. 설치를 하고 배포 스크립트를 <code class=\"language-text\">package.json</code> 에 추가한다. <code class=\"language-text\">\"deploy\": \"gatsby build &amp;&amp; gh-pages -d public -b master\"</code></p>\n<img width=\"958\" alt=\"스크린샷 2021-07-29 오전 1 08 08\" src=\"https://user-images.githubusercontent.com/60437099/127360946-61286056-9d4f-41ab-ab28-006a7f40d41d.png\">\n<p>그리고 <code class=\"language-text\">gatsby-config.js</code> 로들 어가서 해당 주소 값으로 변경해준다.\n<img width=\"622\" alt=\"3\" src=\"https://user-images.githubusercontent.com/60437099/127361027-e099a2f6-e3ca-4c9f-a728-430b10fe24ad.png\"></p>\n<p>그리고 <code class=\"language-text\">git remote add origin 'https://github.com/[username]/[username].github.io.git</code> 으로 연결하고 마지막으로<code class=\"language-text\">npm run deploy</code> 명령어를 통해 프로젝트를 배포한다 마지막에 Published가 나오면 성공적으로 배포한것이다. 그럼 해당 Github Pages 레포지토리로 가서 Setting &#x3C; Pages로 가면 아래 사진과와 같이 배포가 성공적으로 된다. <strong>끝!</strong></p>\n<p><img src=\"https://user-images.githubusercontent.com/60437099/127361075-3326eeb6-471d-490c-9272-fb3d771e01b1.png\" alt=\"4\"></p>\n<h2>Github Actions</h2>\n<p><code class=\"language-text\">npm run deploy</code> 하면 끝나긴 한다 하지만… 불편하고 귀찮다 작성할때마다 배포 명령어를 입력해야 한다. 그래서 쉬운 방법을 찾아보다가 Github Actions를 통해 자동화를 할수 있는걸 알게되었고 검색을 하였다. 그럼 어떻게 했는지 정리해 본다.</p>\n<p>먼저 자신의 git > Settings > Developer settings > Personal access tokens에 들어가서 Generate new token을 클릭해서 키를 발급받아야 한다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/60437099/127365862-da7ccba5-82f7-4b11-a5a7-8dd1ef42cfe1.png\" alt=\"1\"></p>\n<p>토큰을 생성하면 키가 발급되는데 다음에는 확인 할수 없기 때문에 안전한 곳에 저장해야 한다.</p>\n<p>Github Pages의 레파지토리의 Settings > Secrets로 가서 New repostioty secret를 클릭한다.</p>\n<p>Name에는 원하는 이름 value값에는 아까 얻은 토큰 값을 넣고 Add secret 버튼을 클릭하면 생성이 된다.\n<img src=\"https://user-images.githubusercontent.com/60437099/127521181-2742601f-14d5-48a9-a862-8239ab56f38e.png\" alt=\"1\"></p>\n<p>레파지토리에 Actions탭을 누르고 New workflow를 누른다음 set up a workflow yourself를 누른다.</p>\n<p>그리고 이렇게 설정해 주웠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">name<span class=\"token operator\">:</span> gatsby build <span class=\"token operator\">&amp;</span> deploy\n\non<span class=\"token operator\">:</span>\n  push<span class=\"token operator\">:</span>\n    branches<span class=\"token operator\">:</span>\n      <span class=\"token operator\">-</span> dev\n\njobs<span class=\"token operator\">:</span>\n  build_gatsby<span class=\"token operator\">:</span>\n    name<span class=\"token operator\">:</span> build\n    runs<span class=\"token operator\">-</span>on<span class=\"token operator\">:</span> ubuntu<span class=\"token operator\">-</span>latest\n    steps<span class=\"token operator\">:</span>\n      <span class=\"token operator\">-</span> uses<span class=\"token operator\">:</span> actions<span class=\"token operator\">/</span>checkout@v1\n\n      <span class=\"token operator\">-</span> name<span class=\"token operator\">:</span> gatsby build\n        env<span class=\"token operator\">:</span>\n          <span class=\"token constant\">GH_API_KEY</span><span class=\"token operator\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets<span class=\"token punctuation\">.</span><span class=\"token constant\">API_KEY</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        run<span class=\"token operator\">:</span> npm run build\n\n      <span class=\"token operator\">-</span> name<span class=\"token operator\">:</span> deploy\n        uses<span class=\"token operator\">:</span> maxheld83<span class=\"token operator\">/</span>ghpages@v0<span class=\"token punctuation\">.</span><span class=\"token number\">2.1</span>\n        env<span class=\"token operator\">:</span>\n          <span class=\"token constant\">GITHUB_TOKEN</span><span class=\"token operator\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets<span class=\"token punctuation\">.</span><span class=\"token constant\">API_KEY</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token constant\">GH_PAT</span><span class=\"token operator\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets<span class=\"token punctuation\">.</span><span class=\"token constant\">API_KEY</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token constant\">BUILD_DIR</span><span class=\"token operator\">:</span> <span class=\"token string\">'public/'</span></code></pre></div>\n<p>간단하게 흐름을 설명하면 dev브런치에 push를 할때 마다 아래 steps에 정의한 순서대로 actions이 실행된다.\n몇가지 단어를 설명하면\n<code class=\"language-text\">runs-on</code> : 실행환경\n<code class=\"language-text\">steps</code>:정의한 순서대로 실행\n<code class=\"language-text\">uses</code> : 어떤 액션을 사용할지 지정함 이미 만들어진 액션을 사용\n<code class=\"language-text\">env</code> : ${{ secrets.API_KEY }} → API_KEY는 이전에 자기가 정한 이름을 넣어주면 된다 예를 들어 아까 Name에 GitToken이라고 했으면 ${{ secrets.GitToken }} 라고 하면 된다.</p>\n<p>push 하면 <code class=\"language-text\">main.yml</code> 파일이 생성된다 성공하면 아래와 같이 된다.\n<img src=\"https://user-images.githubusercontent.com/60437099/127365945-819b0d97-f48a-46f1-8f55-fd19dd38b55a.png\" alt=\"2\"></p>\n<p>설정하고 배포하니 확실히 삶의 질이 달라지는 느낌이 든다.\n<img src=\"https://user-images.githubusercontent.com/60437099/127366054-12094ff1-74ec-4cd0-9fa0-8d34a27b51e4.png\" alt=\"3\"></p>\n<h3>Source</h3>\n<p><a href=\"https://velog.io/@cogito288/Gatsby%EB%A1%9C-%EB%A7%8C%EB%93%9C%EB%8A%94-Github-%EB%B8%94%EB%A1%9C%EA%B7%B8\" target=\"_blank\" rel=\"nofollow\">https://velog.io/@cogito288/Gatsby로-만드는-Github-블로그</a></p>\n<p><a href=\"https://j3d-team.github.io/deploy_team_blog\" target=\"_blank\" rel=\"nofollow\">https://j3d-team.github.io/deploy_team_blog</a></p>\n<p><a href=\"https://dailyco.tech/share/gatsby-blog-auto-deploy/\" target=\"_blank\" rel=\"nofollow\">https://dailyco.tech/share/gatsby-blog-auto-deploy/</a></p>","frontmatter":{"title":"TIL03 | 블로그 Github Page 생성 및 Actions으로 자동화 하기","summary":"gatsby 를 이용해서 블로그를 만들었고 호스팅을 위해 Github Page를 사용하기로 했다.","date":"2021.07.28.","categories":["TIL","Git"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABw0lEQVQoz41SyUoDQRTsLIK7uKCIp4DgQmJiMjEmM5ksxiRqjAsqoogXg0EQFFRwAZegIWpEBBFU8Ojds3gVP8CD+gGK+ANepqR7MllciIdHd7/3+nVVdRE158JfobKIbNVwLhCTwM6arHy6j3NJak6E2uKSSL5hxOwEMfKo7eqVz0Y+p/7vgUqQdgG754f4eH/Aze01ary9LKfJh5DRsWaa6J60O1EhBvD2eg98PgJ4Rt/8HEirDQUdnuyHpRRiidBNml6bg71O9aLDWK7FhvjlEZ5e7nBwdYzCTq9cp1LQkLWVUqAyCIlFhH5kHNWeHtT5+lDlDkJrdaPSHURjeBj1/hC7TJFViH4UO3wo4X1oCIQp/QzCNL02B/zRWcQvktg528fWaQLR2Dqj2BAMY2pjBUvJGNZP9rCcjGEhscl6IturFKmkUCcKXcUSZUI3i3KnH7rQEIpsHqiMdpRyPCoFH8rFAArtXoaQ9lAJFMpphNlDqXY0VFSfZhsGJ8ewtjiDplY9dHYRxJSqmeU+uiqfkqPhd7NqrbKZDf0DCE5NoGs6gpb+Udky1h+ezUX4m6kVCYhRANE7QAx2EBOfU//Nh19NtGNptQE1TgAAAABJRU5ErkJggg==","aspectRatio":1.7857142857142858,"src":"/static/64da97b99c068b08c8bcb74b4480f09b/c019b/TIL.png","srcSet":"/static/64da97b99c068b08c8bcb74b4480f09b/a9f05/TIL.png 200w,\n/static/64da97b99c068b08c8bcb74b4480f09b/23840/TIL.png 400w,\n/static/64da97b99c068b08c8bcb74b4480f09b/c019b/TIL.png 800w,\n/static/64da97b99c068b08c8bcb74b4480f09b/2def3/TIL.png 1194w","srcWebp":"/static/64da97b99c068b08c8bcb74b4480f09b/210fa/TIL.webp","srcSetWebp":"/static/64da97b99c068b08c8bcb74b4480f09b/8444f/TIL.webp 200w,\n/static/64da97b99c068b08c8bcb74b4480f09b/42fc5/TIL.webp 400w,\n/static/64da97b99c068b08c8bcb74b4480f09b/210fa/TIL.webp 800w,\n/static/64da97b99c068b08c8bcb74b4480f09b/8d403/TIL.webp 1194w","sizes":"(max-width: 800px) 100vw, 800px"}},"publicURL":"/static/64da97b99c068b08c8bcb74b4480f09b/TIL.png"}}}}]}},"pageContext":{"slug":"/TIL3/"}},"staticQueryHashes":[]}